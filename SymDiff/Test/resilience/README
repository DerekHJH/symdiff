//To run with DAC encoding + Corral.exe (unsound for loops and recursion, but more scalable)
//TODO: Needs 1 root procedure, corral.exe path is hardcoded.
run_symdiff_bpl.cmd v1 v2 /rvt /opts:" -usemutual -checkEquivWithDependencies -freeContracts -callCorralOnMergedProgram "
grep -e Checking -e "True " -e "no bugs" v1v2.log

//To run with DAC encoding + contract inference (sound for loops and recursion, less complete)
run_symdiff_bpl v1 v2 /rvt /opts:" -usemutual -checkEquivWithDependencies -freeContracts " /inferContracts:"/inlineDepth:1 /timeLimit:20 "
type v1v2.log | grep _houdini //look for assignments to _control_flag among houdini variables

//To run with nonmodular/static-inlining (unsound for loops and recursion, can be scalable since does not use DAC, but non-scalable due to static inlining)
run_symdiff_bpl v1 v2 /rvt /opts:"  -nonmodular -recursionDepth:4 -splitOutputEqualities  -outvar:\"control\" "
type v1v2.log //counterexample only corresponds to "control" flag


//----------------------------------------------------------------------------
//Optional: if you have the set of tainted source lines from original program
//          this can reduce the set of checks by using static taint analysis
//----------------------------------------------------------------------------

//Its often the v2\changed_lines.txt is generated by comparing v0 and v2. It is bad to trust v0\changed_lines.txt as it may have been the result of comparing v0 against v32 (last version)
//hence we can pass v2\changed_lines.txt as twice to /abstractNonTainted, hoping that the lines make sense for v0 as well

//Sound  (using Houdini and DAC encoding)
run_symdiff_bpl.cmd v1 v2 /rvt /opts:" -usemutual -checkEquivWithDependencies -freeContracts  " /inferContracts:"/inlineDepth:1 /timeLimit:20 " /abstractNonTainted:"[v2\changed_lines.txt v2\changed_lines.txt]"
type v1v2.log | grep _houdini //look for assignments to _control_flag among houdini variables

//Unsound  (using Corral)
//TODO: Needs 1 root procedure, corral.exe path is hardcoded.
run_symdiff_bpl.cmd v1 v2 /rvt /opts:" -usemutual -checkEquivWithDependencies -freeContracts -callCorralOnMergedProgram " /abstractNonTainted:"[v2\changed_lines.txt v2\changed_lines.txt]"
